<h2><b>Реферальная система основанная на Django Rest Framework.</b></h2>

<h3>Функционал программы</h3>
Авторизация происходит по номеру телефона. Первый запрос на ввод номера телефона. 
Пользователь получает 4х значный код авторизации. Второй запрос на ввод кода, после чего
происходит получение токена авторизации.

Если в базе данных нет записи с номером телефона пользователя, то создается новая запись.
Предварительно происходит валидация на корректность номера 
(программа проверяет в формате - 79110000000)

После авторизации пользователь может посмотреть свой профиль.

Пользователь может ввести чей-то реферальный код, ввести его можно только один раз, а так же
может увидеть кого он приглашал.

<h3>Как установить</h3>
Склонируйте/скачайте проект, активируйте виртуальное окружение проекта 
(python -m venv venv), установите необходимые библиотеки 
- pip install -r requirements.txt

Необходимо создать и внести свои данные в файл .env (пример данных в .env_sample)

Создание базы данных:
- psql -U postgres
- CREATE DATABASE <database_name>;
- python manage.py migrate

Для создания суперпользователя:

- python manage.py csu

Данные суперпользователя можно изменить в - user/management/commands/csu.py

Запуск приложения > python manage.py runserver

ВАЖНО

Чтобы воспользоваться функцией отправки СМС пользователю, необходимо зарегистрироваться на портале 
<b>https://dev.exolve.ru/, </b>получить API ключ, арендовать номер телефона и внести данные в файл .env

Ввиду того, что сервис временами не отправляет сообщения и работает только с номерами МТС, для тестирования отправка кода выводится в терминал. 

Реализована документация проекта (Swagger).

Для авторизации отправить POST запрос:
- http://127.0.0.1:8000/users/login_phone/ - {"phone": "79110000000"}

В ответ отобразится {"Done": "Code has been sent."}

Для подтверждения и получения токена авторизации, отправить POST:
- http://127.0.0.1:8000/users/validate_code/ - {"phone": "79110000000", "passcode": "0000"}

При корректном вводе пароля ответ - {"token":"a619b87257b3fcd5bfc6ff441db5f29322dbcdf5"}

Для просмотра информации о пользователе, отправить GET:
- http://127.0.0.1:8000/users/detail/<pk>/ 

Для внесения реферального кода, отправить PUT запрос:
- http://127.0.0.1:8000/users/update/<pk>/ - {"phone": "79110000000", "invited": "00000a"}

